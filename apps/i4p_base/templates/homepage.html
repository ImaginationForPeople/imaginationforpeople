{% extends "base.html" %}
{% load i18n %}
{% load compress %}
{% load cms_tags %}  

{% block style %}
    {% compress css %}
    <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/fonts.css" />
    <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/homepage.css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}css/anythingslider.css" type="text/css" media="screen" />
    {% endcompress %}
{% endblock %}

{% block extra_head %}
  {{ block.super }}
  
    {% compress js %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/hoverIntent.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.ezmark.js"></script>

    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.example.js"></script>

    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.idTabs.min.js"></script>

    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.anythingslider.js" ></script>


    <script type="text/javascript">
    $(document).ready(function(){

        <!-- Text example for forms -->
        $('#quick_project input[name=title]').example('{% trans "My project title" %}');
        $('#quick_project input[name=baseline]').example('{% trans "One line description" %}');

        
        <!-- Loginbox panels slide -->
        $("#loginbox .panel1 a#loginlink-subscribe").click(function () {
            $("#panels-slide").stop().animate({left: '-490px'}, 500);
        });	
        
        $("#loginbox .panel1 a.openid-button").click(function () {
            $("#panels-slide").stop().animate({left: '-245px'}, 500);
        });	
        
        $("#loginbox .loginpanel a.close-button").click(function () {
            $("#panels-slide").stop().animate({left: '0px'}, 500);
        });	
        
        
        <!-- Rollover on project item -->            
        $("#projects_slide ul .focus_project").hover(function(){
            $(this).find(".project_title_cover").fadeOut()
        }).mouseleave(function(){
            $(this).find(".project_title_cover").fadeIn(250)
        });
        
        
        <!-- Project slider buttons -->  
        $("#focus-nav .previous").click(function(){
            $('#projects_slide').data('AnythingSlider').goBack();
        });
        
        $("#focus-nav .next").click(function(){
            $('#projects_slide').data('AnythingSlider').goForward();
        });
        
        
        <!-- Project slider nav -->
        $("#focus-menu .focus-filters a").click(function(){
            $("#focus-menu .focus-filters a").removeClass('selected');
            $(this).addClass('selected');
        });
        
        <!-- Project slider nav -->
        $('.onglettest a').click(function(){
            var url = $(this).attr('href');
            $('#contenu_test').load(url);
            return false;
        });  
        
        <!-- AJAX Focus Zone -->
        var sections = $("#focus-menu .focus-filters li");  
        var loading = $("#loading");     
        var content = $("#projects_slide"); 
        
        function showLoading(){  
            content.fadeOut()
            loading  
                .css({visibility:"visible"})  
                .css({opacity:"1"})  
                .css({display:"block"})  
            ;  
        }  
        
        //hide loading bar  
        function hideLoading(){  
            loading.fadeTo(1000, 0);
            content.fadeIn();
            
            //Slider initialization after AJAX loading
            $('#projects_slide').anythingSlider({width:977, height:290,  easing: "swing", delay: 5000, animationTime: 1000, buildArrows: false, buildNavigation: false, autoPlay: true});
             
            //Projects rollover reset
            $("#projects_slide ul .focus_project").hover(function(){
                $(this).find(".project_title_cover").fadeOut()
            }).mouseleave(function(){
                $(this).find(".project_title_cover").fadeIn(250)
            });
            
            //Show new project style popup when user click on add a project
            $('a.addproject_button').click(function(){
                var url = $(this).attr('href');
                $("#new_project_style_popup_zone").removeClass("hidden");
                return false;
            });
        }; 
        
        //Manage click events
        sections.click(function(){
            //show the loading bar
            showLoading();
            //load selected section
            switch(this.id){
                case "projects-discover":
                    content.load("{% url i4p-homepage-ajax-slider-bestof %}", hideLoading);
                    $('#projects_slide').anythingSlider(1); // Reset to first slide
                    $('#projects_slide').data('AnythingSlider').startStop(true);
                    break;
                case "projects-recents":
                    content.load("{% url i4p-homepage-ajax-slider-latest %}", hideLoading);
                    $('#projects_slide').anythingSlider(1); // Reset to first slide
                    $('#projects_slide').data('AnythingSlider').startStop(true);
                    break;
                case "projects-comments":
                    content.load("{% url i4p-homepage-ajax-slider-commented %}", hideLoading);
                    $('#projects_slide').anythingSlider(1); // Reset to first slide
                    $('#projects_slide').data('AnythingSlider').startStop(true);
                    break;
                case "projects-help":
                    content.load("", hideLoading);
                    break;
                default:
                    //hide loading bar if there is no selected section
                    hideLoading();
                    break;
            }
        });
        
        //Load bestof projects slider by default
        showLoading();
        content.load("{% url i4p-homepage-ajax-slider-bestof %}", hideLoading);
        $('#projects_slide').anythingSlider(1); // Reset to first slide
                    $('#projects_slide').data('AnythingSlider').startStop(true);
      
    });
    </script>
    {% endcompress %}

{% endblock %}



{% block nav %}
    <div id="video-zone">
        <div id="video" class="center">        
            {% placeholder video_zone or %}<img src="{{ STATIC_URL }}images/home/video.jpg" alt="Imagination for People" width="982" height="132"/>{% endplaceholder %}
        </div>
    </div>
    
    {% include "home-blocks/focus-zone.html" %}     

{% endblock %}

{% block content %}

    <!-- Facebook Likebox init -->
    <div id="fb-root"></div>
    <script>
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/fr_FR/all.js#xfbml=1";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>

        
<div id="content-zone">

    <div id="content" class="center">
        
        <div id="left_col">
        
            {% include "home-blocks/infoblock.html" %}     
            
            {% placeholder banners %}
            
        </div>
        
        <div id="right_col">
            
            {% comment %}
                {% include "search.html" %}            
                <div class="clear"></div><br />
            {% endcomment %}
            
            <span>
                {% placeholder site_purpose or %}{% trans 'You can <strong>contribute</strong> , <strong>share</strong> your ideas,  <strong>register</strong> your project' %}{% endplaceholder %}
            </span>
            
            <!-- Loginbox -->
            {% include "home-blocks/loginbox.html" %}     

            <!-- Quick Project -->
            {% include "home-blocks/quick_project.html" %}  
            
            <!-- Last members -->
            {% include "home-blocks/last_members.html" %}     
            
            <!-- Facebook friendbox -->
            {% include "home-blocks/fb-fanbox.html" %}     
            
        </div>
        
        <div class="clear"></div>

    </div>

    <div class="clear"></div>

    </div>	
{% endblock %}
